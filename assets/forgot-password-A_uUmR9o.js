import{l as u,D as p,J as g,m as f,n as x,v as h,w as C,x as P,y as j,z as y,C as E,E as F,r as w,k as v,j as e,d as D,B as I,t as d,L as A}from"./index-CsPbyjqq.js";import{C as S,a as N,b as U,c as b,d as R,e as T}from"./card-gPuprvU5.js";import{A as L}from"./auth-layout-CgsnbYiW.js";import{u as _,a as M,F as V,b as k,c as O,d as z,e as H,f as B}from"./form-DKoAMwr-.js";import{I as W}from"./input-5SQVrAtH.js";import{a as G,A as J}from"./assertValidationError-BeeIeGr2.js";import{o as q,s as K}from"./types-Wky072k2.js";import"./index-BjDkRKFr.js";const Q=r=>u(x,f("ForgotPassword"),g(),{...p,...r});async function X(r){const{username:o}=r;G(!!o,J.EmptyResetPasswordUsername);const t=h.getConfig().Auth?.Cognito;C(t);const{userPoolClientId:n,userPoolId:l,userPoolEndpoint:i}=t,c=r.options?.clientMetadata,a=P({username:o,userPoolId:l,userPoolClientId:n}),m=(await Q({endpointResolver:F({endpointOverride:i})})({region:y(l),userAgentValue:j(E.ResetPassword)},{Username:o,ClientMetadata:c,ClientId:n,UserContextData:a})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:m?.DeliveryMedium,destination:m?.Destination,attributeName:m?.AttributeName}}}}const Y=q({email:K().min(1,{message:"Please enter your email"}).email({message:"Invalid email address"})});function Z({className:r,...o}){const[t,n]=w.useState(!1),l=v(),i=_({resolver:M(Y),defaultValues:{email:""}});async function c(a){n(!0);try{await X({username:a.email}),d.success("Password reset code sent to your email"),l({to:"/otp",search:{email:a.email}})}catch(s){s instanceof Error&&s.name==="UserNotFoundException"?d.error("No account found with this email address"):s instanceof Error&&s.name==="InvalidParameterException"?d.error("Invalid email format"):d.error(s instanceof Error?s.message:"Failed to send reset code")}finally{n(!1)}}return e.jsx(V,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:D("grid gap-2",r),...o,children:[e.jsx(k,{control:i.control,name:"email",render:({field:a})=>e.jsxs(O,{className:"space-y-1",children:[e.jsx(z,{children:"Email"}),e.jsx(H,{children:e.jsx(W,{placeholder:"name@example.com",...a})}),e.jsx(B,{})]})}),e.jsx(I,{className:"mt-2",disabled:t,children:t?"Sending...":"Continue"})]})})}function $(){return e.jsx(L,{children:e.jsxs(S,{className:"gap-4",children:[e.jsxs(N,{children:[e.jsx(U,{className:"text-lg tracking-tight",children:"Forgot Password"}),e.jsxs(b,{children:["Enter your registered email and ",e.jsx("br",{})," we will send you a link to reset your password."]})]}),e.jsx(R,{children:e.jsx(Z,{})}),e.jsx(T,{children:e.jsxs("p",{className:"text-muted-foreground px-8 text-center text-sm",children:["Don't have an account?"," ",e.jsx(A,{to:"/sign-up",className:"hover:text-primary underline underline-offset-4",children:"Sign up"}),"."]})})]})})}const de=$;export{de as component};
