import{r as S,j as e,B as D,d as T,k as Q,t as O,h as $}from"./index-CvyRkeE5.js";import{u as ve,b as Y,q as V,H as ye,S as be,a as ke,T as we,P as fe,M as Ie}from"./header-company-dropdown-CQYbnI8v.js";import{u as Ce,D as Se}from"./use-data-table-BURvSaac.js";import{C as K}from"./checkbox-DQAukn5y.js";import{B as H}from"./badge-Ce5hJyxp.js";import{D as C}from"./data-table-column-header-DAw5f9Xg.js";import{D as G,e as De,f as W,g as J,h as X,i as L,$ as Ne,B as Ve,z as He}from"./avatar-_2VmutPB.js";import{c as N}from"./createReactComponent-DcxUhOxs.js";import{I as Fe}from"./IconEye-D0cYwAOz.js";import{I as Me}from"./IconEdit-ndTsYmJu.js";import{I as _e}from"./IconTrash-Cb89azM9.js";import{M as Te,P as Oe,C as Ae,a as Ee}from"./react-icons.esm-hx67oMTw.js";import{I as y}from"./input-5vX5qBNK.js";import{C as Le,a as ze,b as Pe,c as Re,d as B,e as q,f as Ke,D as Z,g as ee,h as ae,i as re,j as se,k as oe}from"./command-DTdQs4HX.js";import{P as Be,a as qe,b as Ue}from"./popover-NdNb9ebW.js";import{S as Qe}from"./separator-D1ovcUFg.js";import{I as $e}from"./IconPlus-CCSf5-4H.js";import{A as Ye,a as Ge,b as We,c as Je,d as Xe,e as Ze,f as ea,g as aa}from"./alert-dialog-DBJIasGu.js";import{s as ra}from"./show-submitted-data-BsY0sSLU.js";import{u as ne,a as le,F as te,b as d,c as u,d as h,e as x,f as m}from"./form-BBbFGrnZ.js";import{T as A}from"./textarea-DtY41fJS.js";import{S as k,a as w,b as f,c as I,d as v}from"./select-yRulkKwZ.js";import{h as R}from"./hardware-api-Dg-kEGj7.js";import{e as b,o as g,s as l,a as P,c as _,b as sa}from"./types-Wky072k2.js";import{A as oa,I as na,a as la}from"./alert-D1mu7eGo.js";import"./table-CtXYL8Fg.js";import"./index-bd6ufVwP.js";import"./index-BYO_HMiJ.js";import"./index-ChHWVpPk.js";import"./index-DCzpbC7R.js";import"./check-DOj7a-5i.js";import"./index-Qfb_IjkA.js";import"./index-Bt6K678h.js";import"./index-Bb0YeX9p.js";import"./index-fHPixuyN.js";import"./index-rpDruwTI.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ta=N("outline","box","IconBox",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ia=N("outline","broadcast","IconBroadcast",[["path",{d:"M18.364 19.364a9 9 0 1 0 -12.728 0",key:"svg-0"}],["path",{d:"M15.536 16.536a5 5 0 1 0 -7.072 0",key:"svg-1"}],["path",{d:"M12 13m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ca=N("outline","camera","IconCamera",[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var da=N("outline","device-tablet","IconDeviceTablet",[["path",{d:"M5 4a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1v-16z",key:"svg-0"}],["path",{d:"M11 17a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ua=N("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ha=N("outline","keyboard","IconKeyboard",[["path",{d:"M2 6m0 2a2 2 0 0 1 2 -2h16a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-16a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M6 10l0 .01",key:"svg-1"}],["path",{d:"M10 10l0 .01",key:"svg-2"}],["path",{d:"M14 10l0 .01",key:"svg-3"}],["path",{d:"M18 10l0 .01",key:"svg-4"}],["path",{d:"M6 14l0 .01",key:"svg-5"}],["path",{d:"M18 14l0 .01",key:"svg-6"}],["path",{d:"M10 14l4 .01",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xa=N("outline","radar","IconRadar",[["path",{d:"M21 12h-8a1 1 0 1 0 -1 1v8a9 9 0 0 0 9 -9",key:"svg-0"}],["path",{d:"M16 9a5 5 0 1 0 -7 7",key:"svg-1"}],["path",{d:"M20.486 9a9 9 0 1 0 -11.482 11.495",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ma=N("outline","router","IconRouter",[["path",{d:"M3 13m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17l0 .01",key:"svg-1"}],["path",{d:"M13 17l0 .01",key:"svg-2"}],["path",{d:"M15 13l0 -2",key:"svg-3"}],["path",{d:"M11.75 8.75a4 4 0 0 1 6.5 0",key:"svg-4"}],["path",{d:"M8.5 6.5a8 8 0 0 1 13 0",key:"svg-5"}]]);const ie=S.createContext(void 0);function pa({children:a}){const[n,o]=S.useState([]),[i,p]=S.useState(!1),[t,r]=S.useState(!1),[c,M]=S.useState(!1),[s,j]=S.useState(null),[je,ge]=S.useState(null);return e.jsx(ie.Provider,{value:{selectedHardware:n,setSelectedHardware:o,isCreateDialogOpen:i,setIsCreateDialogOpen:p,isEditDialogOpen:t,setIsEditDialogOpen:r,isDeleteDialogOpen:c,setIsDeleteDialogOpen:M,editingHardware:s,setEditingHardware:j,deletingHardware:je,setDeletingHardware:ge},children:a})}function F(){const a=S.useContext(ie);if(!a)throw new Error("useHardwareContext must be used within HardwareProvider");return a}function ja({row:a}){const n=a.original,{setEditingHardware:o,setIsEditDialogOpen:i,setDeletingHardware:p,setIsDeleteDialogOpen:t}=F(),r=()=>{o(n),i(!0)},c=()=>{p(n),t(!0)};return e.jsxs(G,{children:[e.jsx(De,{asChild:!0,children:e.jsxs(D,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[e.jsx(ua,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(W,{align:"end",children:[e.jsx(J,{children:"Actions"}),e.jsx(X,{}),e.jsxs(L,{className:"cursor-pointer",children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(L,{className:"cursor-pointer",onClick:r,children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(L,{className:"cursor-pointer text-destructive hover:text-destructive",onClick:c,children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}const ga={router:ma,tablet:da,camera:ca,lock:Ne,lockbox:ta,keypad:ha,hub:ia,sensor:xa},U=[{id:"select",size:40,header:({table:a})=>e.jsx(K,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:n=>a.toggleAllPageRowsSelected(!!n),"aria-label":"Select all"}),cell:({row:a})=>e.jsx(K,{checked:a.getIsSelected(),onCheckedChange:n=>a.toggleSelected(!!n),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:a})=>e.jsx(C,{column:a,title:"Name"}),cell:({row:a})=>{const n=a.original.category,o=n?ga[n]:null;return e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(o,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:a.getValue("name")||"Unnamed"})]})}},{accessorKey:"category",header:({column:a})=>e.jsx(C,{column:a,title:"Category"}),cell:({row:a})=>{const n=a.getValue("category");return n?e.jsx(H,{variant:"outline",className:"capitalize",children:n}):"-"},filterFn:(a,n,o)=>o.includes(a.getValue(n))},{accessorKey:"inventoryId",header:({column:a})=>e.jsx(C,{column:a,title:"Inventory ID"}),cell:({row:a})=>a.getValue("inventoryId")||"-"},{accessorKey:"model",header:({column:a})=>e.jsx(C,{column:a,title:"Model"}),cell:({row:a})=>a.getValue("model")||"-"},{accessorKey:"serial",header:({column:a})=>e.jsx(C,{column:a,title:"Serial"}),cell:({row:a})=>a.getValue("serial")||"-"},{accessorKey:"property",header:({column:a})=>e.jsx(C,{column:a,title:"Property"}),cell:({row:a})=>a.original.property?.name||"-"},{accessorKey:"user",header:({column:a})=>e.jsx(C,{column:a,title:"Assigned To"}),cell:({row:a})=>{const n=a.original.user;return n?.name||n?.email||"-"}},{accessorKey:"status",header:({column:a})=>e.jsx(C,{column:a,title:"Status"}),cell:({row:a})=>{const n=a.getValue("status");return e.jsx(H,{variant:n==="active"?"default":"secondary",className:T(n==="active"&&"bg-green-500/10 text-green-500 hover:bg-green-500/20",n==="disabled"&&"bg-gray-500/10 text-gray-500 hover:bg-gray-500/20"),children:n})}},{accessorKey:"operationalStatus",header:({column:a})=>e.jsx(C,{column:a,title:"Operational Status"}),cell:({row:a})=>{const n=a.getValue("operationalStatus"),o=a.original.battery;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{variant:"outline",className:T(n==="online"&&"border-green-500 text-green-500",n==="offline"&&"border-red-500 text-red-500",n==="unknown"&&"border-gray-500 text-gray-500"),children:n}),o&&o.level<20&&e.jsxs(H,{variant:"destructive",className:"text-xs",children:[o.level,"%"]})]})}},{id:"actions",size:50,cell:({row:a})=>e.jsx(ja,{row:a})}];function va({table:a}){return e.jsxs(G,{modal:!1,children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(D,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(W,{align:"end",className:"w-[150px]",children:[e.jsx(J,{children:"Toggle columns"}),e.jsx(X,{}),a.getAllColumns().filter(n=>typeof n.accessorFn<"u"&&n.getCanHide()).map(n=>e.jsx(He,{className:"capitalize",checked:n.getIsVisible(),onCheckedChange:o=>n.toggleVisibility(!!o),children:n.id},n.id))]})]})}function z({column:a,title:n,options:o}){const i=a?.getFacetedUniqueValues(),p=new Set(a?.getFilterValue());return e.jsxs(Be,{children:[e.jsx(qe,{asChild:!0,children:e.jsxs(D,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(Oe,{className:"h-4 w-4"}),n,p?.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Qe,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(H,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:p.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:p.size>2?e.jsxs(H,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[p.size," selected"]}):o.filter(t=>p.has(t.value)).map(t=>e.jsx(H,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:t.label},t.value))})]})]})}),e.jsx(Ue,{className:"w-[200px] p-0",align:"start",children:e.jsxs(Le,{children:[e.jsx(ze,{placeholder:n}),e.jsxs(Pe,{children:[e.jsx(Re,{children:"No results found."}),e.jsx(B,{children:o.map(t=>{const r=p.has(t.value);return e.jsxs(q,{onSelect:()=>{r?p.delete(t.value):p.add(t.value);const c=Array.from(p);a?.setFilterValue(c.length?c:void 0)},children:[e.jsx("div",{className:T("border-primary flex h-4 w-4 items-center justify-center rounded-sm border",r?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Ae,{className:T("h-4 w-4")})}),t.icon&&e.jsx(t.icon,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:t.label}),i?.get?.(t.value)?e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:i.get(t.value)}):null]},t.value)})}),p.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsx(B,{children:e.jsx(q,{onSelect:()=>a?.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}const ya=[{value:"router",label:"Router"},{value:"tablet",label:"Tablet"},{value:"camera",label:"Camera"},{value:"lock",label:"Lock"},{value:"lockbox",label:"Lockbox"},{value:"keypad",label:"Keypad"},{value:"hub",label:"Hub"},{value:"sensor",label:"Sensor"}],ba=[{value:"active",label:"Active"},{value:"disabled",label:"Disabled"}],ka=[{value:"online",label:"Online"},{value:"offline",label:"Offline"},{value:"unknown",label:"Unknown"}];function wa({table:a}){const n=a.getState().columnFilters.length>0,{setIsCreateDialogOpen:o}=F();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center space-x-2",children:[e.jsx(y,{placeholder:"Search hardware...",value:a.getColumn("name")?.getFilterValue()??"",onChange:i=>a.getColumn("name")?.setFilterValue(i.target.value),className:"h-8 w-[150px] lg:w-[250px]"}),a.getColumn("category")&&e.jsx(z,{column:a.getColumn("category"),title:"Category",options:ya}),a.getColumn("status")&&e.jsx(z,{column:a.getColumn("status"),title:"Status",options:ba}),a.getColumn("operationalStatus")&&e.jsx(z,{column:a.getColumn("operationalStatus"),title:"Operational",options:ka}),n&&e.jsxs(D,{variant:"ghost",onClick:()=>a.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(Ee,{className:"ml-2 h-4 w-4"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(va,{table:a}),e.jsxs(D,{size:"sm",className:"h-8",onClick:()=>o(!0),children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"Add Hardware"]})]})]})}function fa({data:a,isLoading:n}){const{setSelectedHardware:o}=F(),{table:i,rowSelection:p}=Ce({data:a,columns:U}),t=Object.keys(p).filter(r=>p[r]).map(r=>a[parseInt(r)]).filter(Boolean);return t.length!==i.getSelectedRowModel().rows.length&&o(t),e.jsx(Se,{table:i,columns:U,isLoading:n,toolbar:e.jsx(wa,{table:i}),showToolbar:!0})}function Ia(a){return ve({queryKey:V.hardware.list(a),queryFn:()=>R.list(a),staleTime:5*60*1e3})}function Ca(){const a=Q();return Y({mutationFn:n=>R.create(n),onSuccess:()=>{a.invalidateQueries({queryKey:V.hardware.all}),O.success("Hardware created successfully")},onError:()=>{O.error("Failed to create hardware")}})}function Sa(){const a=Q();return Y({mutationFn:({id:n,data:o})=>R.update(n,o),onMutate:async({id:n,data:o})=>{await a.cancelQueries({queryKey:V.hardware.detail(n)});const i=a.getQueryData(V.hardware.detail(n));return i&&a.setQueryData(V.hardware.detail(n),{...i,...o}),{previousHardware:i}},onError:(n,o,i)=>{i?.previousHardware&&a.setQueryData(V.hardware.detail(o.id),i.previousHardware),O.error("Failed to update hardware")},onSuccess:()=>{a.invalidateQueries({queryKey:V.hardware.all}),O.success("Hardware updated successfully")}})}const ce=b(["router","tablet","camera","lock","lockbox","keypad","hub","sensor"]),de=b(["active","disabled"]),Da=b(["online","offline","unknown"]),Na=b(["online","offline","unknown"]),E=b(["august","switchbot","yale"]),ue=b(["igloo","puroma","master-lock"]),he=b(["switchbot"]),xe=b(["twilio","agora"]),me=b(["v1","v2"]),Va=b(["lock_state_battery_warning_none","lock_state_battery_warning_2week","lock_state_battery_warning_1week","lock_state_battery_warning_2day","keypad_battery_none","keypad_battery_warning","keypad_battery_critical"]);g({_id:l(),name:l().optional(),description:l().optional(),notes:l().optional(),inventoryId:l().optional(),tags:P(l()).optional(),category:ce.optional(),status:de.default("active"),user:g({_id:l(),name:l().optional(),email:l().optional()}).optional(),kit:g({_id:l(),name:l().optional()}).optional(),account:g({_id:l(),name:l().optional()}).optional(),org:g({_id:l(),name:l().optional()}).optional(),property:g({_id:l(),name:l().optional(),address:l().optional()}).optional(),model:l().optional(),serial:l().optional(),router:g({id:l().optional(),status:Na.default("unknown")}).optional(),lock:g({id:l().optional(),vendor:E.optional()}).optional(),lockbox:g({id:l().optional(),vendor:ue.optional()}).optional(),hub:g({lockId:l().optional()}).optional(),sensor:g({lockId:l().optional()}).optional(),button:g({id:l().optional(),time:_().optional(),vendor:he.optional()}).optional(),keypad:g({id:l().optional(),vendor:E.optional()}).optional(),tablet:g({dropin:xe.optional()}).optional(),cameraFirmware:me.optional(),zm:g({status:l().optional(),active:sa().default(!1),monitorId:_().optional()}).optional(),structure:g({_id:l(),name:l().optional()}).optional(),make:l().default("ezvizdirect"),accounts:P(g({_id:l(),name:l().optional()})).optional(),battery:g({warningLevel:g({message:Va.optional(),lastUpdated:l().optional()}).optional(),level:_().default(100)}).optional(),operationalStatus:Da.default("online"),createdAt:l().optional(),updatedAt:l().optional()});const pe=g({name:l().min(1,"Name is required"),description:l().optional(),notes:l().optional(),inventoryId:l().optional(),tags:P(l()).optional(),category:ce.optional(),status:de.optional(),userId:l().optional(),kitId:l().optional(),accountId:l().optional(),orgId:l().optional(),propertyId:l().optional(),model:l().optional(),serial:l().optional(),structureId:l().optional(),make:l().optional(),routerId:l().optional(),routerStatus:b(["online","offline","unknown"]).optional(),lockId:l().optional(),lockVendor:E.optional(),lockboxId:l().optional(),lockboxVendor:ue.optional(),hubLockId:l().optional(),sensorLockId:l().optional(),buttonId:l().optional(),buttonTime:_().optional(),buttonVendor:he.optional(),keypadId:l().optional(),keypadVendor:E.optional(),tabletDropin:xe.optional(),cameraFirmware:me.optional()}),Ha=[{value:"router",label:"Router"},{value:"tablet",label:"Tablet"},{value:"camera",label:"Camera"},{value:"lock",label:"Lock"},{value:"lockbox",label:"Lockbox"},{value:"keypad",label:"Keypad"},{value:"hub",label:"Hub"},{value:"sensor",label:"Sensor"}],Fa=[{value:"active",label:"Active"},{value:"disabled",label:"Disabled"}];function Ma(){const{isCreateDialogOpen:a,setIsCreateDialogOpen:n}=F(),o=Ca(),i=ne({resolver:le(pe),defaultValues:{name:"",description:"",notes:"",inventoryId:"",tags:[],status:"active",make:"ezvizdirect"}}),p=async r=>{try{const c={name:r.name,description:r.description,notes:r.notes,inventoryId:r.inventoryId,tags:r.tags,category:r.category,status:r.status,model:r.model,serial:r.serial,make:r.make};r.category==="router"&&(r.routerId||r.routerStatus)&&(c.router={id:r.routerId,status:r.routerStatus||"unknown"}),r.category==="lock"&&(r.lockId||r.lockVendor)&&(c.lock={id:r.lockId,vendor:r.lockVendor}),r.category==="lockbox"&&(r.lockboxId||r.lockboxVendor)&&(c.lockbox={id:r.lockboxId,vendor:r.lockboxVendor}),r.category==="hub"&&r.hubLockId&&(c.hub={lockId:r.hubLockId}),r.category==="sensor"&&r.sensorLockId&&(c.sensor={lockId:r.sensorLockId}),r.category==="keypad"&&(r.keypadId||r.keypadVendor)&&(c.keypad={id:r.keypadId,vendor:r.keypadVendor}),r.category==="tablet"&&r.tabletDropin&&(c.tablet={dropin:r.tabletDropin}),r.category==="camera"&&r.cameraFirmware&&(c.cameraFirmware=r.cameraFirmware),await o.mutateAsync(c),i.reset(),n(!1)}catch{}},t=i.watch("category");return e.jsx(Z,{open:a,onOpenChange:n,children:e.jsxs(ee,{className:"sm:max-w-[625px]",children:[e.jsxs(ae,{children:[e.jsx(re,{children:"Add Hardware"}),e.jsx(se,{children:"Create a new hardware device in the system."})]}),e.jsx(te,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(p),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(d,{control:i.control,name:"name",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Name *"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter hardware name",...r})}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"category",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Category"}),e.jsxs(k,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select category"})})}),e.jsx(I,{children:Ha.map(c=>e.jsx(v,{value:c.value,children:c.label},c.value))})]}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"inventoryId",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Inventory ID"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter inventory ID",...r})}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"status",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Status"}),e.jsxs(k,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select status"})})}),e.jsx(I,{children:Fa.map(c=>e.jsx(v,{value:c.value,children:c.label},c.value))})]}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"model",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Model"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter model",...r})}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"serial",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Serial Number"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter serial number",...r})}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"description",render:({field:r})=>e.jsxs(u,{className:"col-span-2",children:[e.jsx(h,{children:"Description"}),e.jsx(x,{children:e.jsx(A,{placeholder:"Enter hardware description",className:"resize-none",rows:3,...r})}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"notes",render:({field:r})=>e.jsxs(u,{className:"col-span-2",children:[e.jsx(h,{children:"Notes"}),e.jsx(x,{children:e.jsx(A,{placeholder:"Add any additional notes",className:"resize-none",rows:3,...r})}),e.jsx(m,{})]})}),t==="router"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{control:i.control,name:"routerId",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Router ID"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter router ID",...r})}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"routerStatus",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Router Status"}),e.jsxs(k,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select status"})})}),e.jsxs(I,{children:[e.jsx(v,{value:"online",children:"Online"}),e.jsx(v,{value:"offline",children:"Offline"}),e.jsx(v,{value:"unknown",children:"Unknown"})]})]}),e.jsx(m,{})]})})]}),t==="lock"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{control:i.control,name:"lockId",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Lock ID"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter lock ID",...r})}),e.jsx(m,{})]})}),e.jsx(d,{control:i.control,name:"lockVendor",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Lock Vendor"}),e.jsxs(k,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select vendor"})})}),e.jsxs(I,{children:[e.jsx(v,{value:"august",children:"August"}),e.jsx(v,{value:"switchbot",children:"SwitchBot"}),e.jsx(v,{value:"yale",children:"Yale"})]})]}),e.jsx(m,{})]})})]}),t==="camera"&&e.jsx(d,{control:i.control,name:"cameraFirmware",render:({field:r})=>e.jsxs(u,{className:"col-span-2",children:[e.jsx(h,{children:"Camera Firmware"}),e.jsxs(k,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select firmware"})})}),e.jsxs(I,{children:[e.jsx(v,{value:"v1",children:"Version 1"}),e.jsx(v,{value:"v2",children:"Version 2"})]})]}),e.jsx(m,{})]})})]}),e.jsxs(oe,{children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(D,{type:"submit",disabled:o.isPending,children:[o.isPending&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Hardware"]})]})]})})]})})}const _a=[{value:"router",label:"Router"},{value:"tablet",label:"Tablet"},{value:"camera",label:"Camera"},{value:"lock",label:"Lock"},{value:"lockbox",label:"Lockbox"},{value:"keypad",label:"Keypad"},{value:"hub",label:"Hub"},{value:"sensor",label:"Sensor"}],Ta=[{value:"active",label:"Active"},{value:"disabled",label:"Disabled"}];function Oa(){const{isEditDialogOpen:a,setIsEditDialogOpen:n,editingHardware:o,setEditingHardware:i}=F(),p=Sa(),t=ne({resolver:le(pe),defaultValues:{name:"",description:"",notes:"",inventoryId:"",tags:[],status:"active",make:"ezvizdirect"}});S.useEffect(()=>{o&&t.reset({name:o.name||"",description:o.description||"",notes:o.notes||"",inventoryId:o.inventoryId||"",tags:o.tags||[],category:o.category,status:o.status||"active",model:o.model||"",serial:o.serial||"",make:o.make||"ezvizdirect",userId:o.user?._id,kitId:o.kit?._id,accountId:o.account?._id,orgId:o.org?._id,propertyId:o.property?._id,structureId:o.structure?._id,routerId:o.router?.id,routerStatus:o.router?.status,lockId:o.lock?.id,lockVendor:o.lock?.vendor,lockboxId:o.lockbox?.id,lockboxVendor:o.lockbox?.vendor,hubLockId:o.hub?.lockId,sensorLockId:o.sensor?.lockId,buttonId:o.button?.id,buttonTime:o.button?.time,buttonVendor:o.button?.vendor,keypadId:o.keypad?.id,keypadVendor:o.keypad?.vendor,tabletDropin:o.tablet?.dropin,cameraFirmware:o.cameraFirmware})},[o,t]);const r=async s=>{if(o)try{const j={name:s.name,description:s.description,notes:s.notes,inventoryId:s.inventoryId,tags:s.tags,category:s.category,status:s.status,model:s.model,serial:s.serial,make:s.make};s.category==="router"&&(s.routerId||s.routerStatus)&&(j.router={id:s.routerId,status:s.routerStatus||"unknown"}),s.category==="lock"&&(s.lockId||s.lockVendor)&&(j.lock={id:s.lockId,vendor:s.lockVendor}),s.category==="lockbox"&&(s.lockboxId||s.lockboxVendor)&&(j.lockbox={id:s.lockboxId,vendor:s.lockboxVendor}),s.category==="hub"&&s.hubLockId&&(j.hub={lockId:s.hubLockId}),s.category==="sensor"&&s.sensorLockId&&(j.sensor={lockId:s.sensorLockId}),s.category==="keypad"&&(s.keypadId||s.keypadVendor)&&(j.keypad={id:s.keypadId,vendor:s.keypadVendor}),s.category==="tablet"&&s.tabletDropin&&(j.tablet={dropin:s.tabletDropin}),s.category==="camera"&&s.cameraFirmware&&(j.cameraFirmware=s.cameraFirmware),await p.mutateAsync({id:o._id,data:j}),n(!1),i(null)}catch{}},c=s=>{s||i(null),n(s)},M=t.watch("category");return e.jsx(Z,{open:a,onOpenChange:c,children:e.jsxs(ee,{className:"sm:max-w-[625px]",children:[e.jsxs(ae,{children:[e.jsx(re,{children:"Edit Hardware"}),e.jsx(se,{children:"Update the hardware device information."})]}),e.jsx(te,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(r),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(d,{control:t.control,name:"name",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Name *"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter hardware name",...s})}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"category",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Category"}),e.jsxs(k,{onValueChange:s.onChange,value:s.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select category"})})}),e.jsx(I,{children:_a.map(j=>e.jsx(v,{value:j.value,children:j.label},j.value))})]}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"inventoryId",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Inventory ID"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter inventory ID",...s})}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"status",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Status"}),e.jsxs(k,{onValueChange:s.onChange,value:s.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select status"})})}),e.jsx(I,{children:Ta.map(j=>e.jsx(v,{value:j.value,children:j.label},j.value))})]}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"model",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Model"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter model",...s})}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"serial",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Serial Number"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter serial number",...s})}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"description",render:({field:s})=>e.jsxs(u,{className:"col-span-2",children:[e.jsx(h,{children:"Description"}),e.jsx(x,{children:e.jsx(A,{placeholder:"Enter hardware description",className:"resize-none",rows:3,...s})}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"notes",render:({field:s})=>e.jsxs(u,{className:"col-span-2",children:[e.jsx(h,{children:"Notes"}),e.jsx(x,{children:e.jsx(A,{placeholder:"Add any additional notes",className:"resize-none",rows:3,...s})}),e.jsx(m,{})]})}),M==="router"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{control:t.control,name:"routerId",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Router ID"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter router ID",...s})}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"routerStatus",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Router Status"}),e.jsxs(k,{onValueChange:s.onChange,value:s.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select status"})})}),e.jsxs(I,{children:[e.jsx(v,{value:"online",children:"Online"}),e.jsx(v,{value:"offline",children:"Offline"}),e.jsx(v,{value:"unknown",children:"Unknown"})]})]}),e.jsx(m,{})]})})]}),M==="lock"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{control:t.control,name:"lockId",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Lock ID"}),e.jsx(x,{children:e.jsx(y,{placeholder:"Enter lock ID",...s})}),e.jsx(m,{})]})}),e.jsx(d,{control:t.control,name:"lockVendor",render:({field:s})=>e.jsxs(u,{children:[e.jsx(h,{children:"Lock Vendor"}),e.jsxs(k,{onValueChange:s.onChange,value:s.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select vendor"})})}),e.jsxs(I,{children:[e.jsx(v,{value:"august",children:"August"}),e.jsx(v,{value:"switchbot",children:"SwitchBot"}),e.jsx(v,{value:"yale",children:"Yale"})]})]}),e.jsx(m,{})]})})]}),M==="camera"&&e.jsx(d,{control:t.control,name:"cameraFirmware",render:({field:s})=>e.jsxs(u,{className:"col-span-2",children:[e.jsx(h,{children:"Camera Firmware"}),e.jsxs(k,{onValueChange:s.onChange,value:s.value,children:[e.jsx(x,{children:e.jsx(w,{children:e.jsx(f,{placeholder:"Select firmware"})})}),e.jsxs(I,{children:[e.jsx(v,{value:"v1",children:"Version 1"}),e.jsx(v,{value:"v2",children:"Version 2"})]})]}),e.jsx(m,{})]})})]}),e.jsxs(oe,{children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(D,{type:"submit",disabled:p.isPending,children:[p.isPending&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Hardware"]})]})]})})]})})}function Aa(){const{isDeleteDialogOpen:a,setIsDeleteDialogOpen:n,deletingHardware:o,setDeletingHardware:i}=F(),p=()=>{o&&(ra({action:"delete",hardwareId:o._id,hardwareName:o.name}),n(!1),i(null))};return e.jsxs(e.Fragment,{children:[e.jsx(Ma,{}),e.jsx(Oa,{}),e.jsx(Ye,{open:a,onOpenChange:n,children:e.jsxs(Ge,{children:[e.jsxs(We,{children:[e.jsx(Je,{children:"Are you absolutely sure?"}),e.jsxs(Xe,{children:["This action cannot be undone. This will permanently delete the hardware",o?.name&&e.jsxs(e.Fragment,{children:[" ",e.jsx("span",{className:"font-semibold",children:o.name})]})," ","from the system."]})]}),e.jsxs(Ze,{children:[e.jsx(ea,{onClick:()=>i(null),children:"Cancel"}),e.jsx(aa,{onClick:p,children:"Delete"})]})]})})]})}function Ea(){const{data:a=[],isLoading:n,error:o}=Ia();return e.jsxs(pa,{children:[e.jsxs(ye,{fixed:!0,children:[e.jsx(be,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(ke,{}),e.jsx(we,{}),e.jsx(fe,{})]})]}),e.jsxs(Ie,{children:[e.jsx("div",{className:"mb-2 flex items-center justify-between space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Hardware Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor all hardware devices"})]})}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:o?e.jsxs(oa,{variant:"destructive",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx(la,{children:"Failed to load hardware. Please try again later."})]}):e.jsx(fa,{data:a,isLoading:n})})]}),e.jsx(Aa,{})]})}const br=Ea;export{br as component};
