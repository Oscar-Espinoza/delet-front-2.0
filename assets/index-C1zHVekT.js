import{c as G,k as L,t as w,j as e,B as x,d as v,m as te,r as j,a as ne}from"./index-CvyRkeE5.js";import{c as h,u as oe,b as $,q as C,H as le,S as ie,a as ce,T as de,P as me,M as ue}from"./header-company-dropdown-CQYbnI8v.js";import{u as pe,D as xe}from"./use-data-table-BURvSaac.js";import{h as he,i as ge,P as je,C as ye,M as fe,a as be,D as ve}from"./react-icons.esm-hx67oMTw.js";import{I as V}from"./input-5vX5qBNK.js";import{C as X}from"./credit-card-CfwpLHHZ.js";import{C as A,a as we}from"./circle-x-kOYWSQv3.js";import{B as k}from"./badge-Ce5hJyxp.js";import{C as Ce,a as Ne,b as Se,c as Oe,d as E,e as H,f as Pe,D as Te,g as ke,h as De,i as Fe,j as Ae}from"./command-DTdQs4HX.js";import{P as qe,a as _e,b as Ie}from"./popover-NdNb9ebW.js";import{S as Me}from"./separator-D1ovcUFg.js";import{D as J,B as Ve,f as Y,g as ze,h as z,z as Le,e as $e,i as S,K as Ke,L as Ee,M as He,N as Qe,O as Re,p as Q}from"./avatar-_2VmutPB.js";import{C as R}from"./checkbox-DQAukn5y.js";import{D as g}from"./data-table-column-header-DAw5f9Xg.js";import{L as Be}from"./long-text-B2UXBo_g.js";import{o as N,s as c,b as Ue,a as Z,c as D,e as ee,u as K,f as We}from"./types-Wky072k2.js";import{E as Ge}from"./eye-xnJlvzOX.js";import{F as Xe}from"./file-text-DtrSjpN_.js";import{T as se}from"./trash-2-DYCyaPxF.js";import{f as B}from"./format-BvUxDbfm.js";import{I as Je}from"./IconPlus-CCSf5-4H.js";import{u as Ye,a as Ze,g as es,F as ss,b as O,c as P,d as b,e as T,h as M,f as F}from"./form-BBbFGrnZ.js";import{T as U}from"./textarea-DtY41fJS.js";import{S as as}from"./switch-CUrAARR7.js";import{P as rs}from"./plus-CTHQPs9u.js";import{A as ts,I as ns,a as os}from"./alert-D1mu7eGo.js";import"./createReactComponent-DcxUhOxs.js";import"./select-yRulkKwZ.js";import"./index-Bb0YeX9p.js";import"./index-DCzpbC7R.js";import"./index-bd6ufVwP.js";import"./index-Bt6K678h.js";import"./index-fHPixuyN.js";import"./index-Qfb_IjkA.js";import"./index-BYO_HMiJ.js";import"./check-DOj7a-5i.js";import"./table-CtXYL8Fg.js";import"./index-ChHWVpPk.js";import"./index-rpDruwTI.js";/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],q=G("package",ls);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cs=G("square-pen",is),_={getOrders:async(s={})=>{const{page:a=1,pageSize:r=10,sortBy:o="createdAt",sortOrder:n="desc",search:t="",company:m,user:u,type:l,status:f,createdAtFrom:y,createdAtTo:i,isAdmin:p}=s,d=new URLSearchParams({page:a.toString(),pageSize:r.toString(),sortBy:o,sortOrder:n});t&&d.append("search",t),m&&d.append("company",m),u&&d.append("user",u),l&&d.append("type",l),f&&d.append("status",f),y&&d.append("createdAtFrom",y),i&&d.append("createdAtTo",i);const I=p?"/api/order/admin/query":"/api/order/query";return h.get(`${I}?${d.toString()}`)},getOrder:async(s,a=!1)=>{const r=a?`/api/order/admin/${s}`:`/api/order/${s}`;return h.get(r)},placeOrder:async(s,a=!1)=>{const r=a?"/api/order/admin/place":"/api/order/place",o={quantity:s.quantity,addresses:s.addresses,provideShippingLater:s.provideShippingLater,notes:s.notes||""};return h.post(r,o)},updateOrderStatus:async(s,a,r=!1)=>{const o=r?`/api/order/admin/${s}/status`:`/api/order/${s}/status`;return h.patch(o,{status:a})},updateOrder:async(s,a,r=!1)=>{const o=r?`/api/order/admin/${s}`:`/api/order/${s}`;return h.patch(o,a)},cancelOrder:async(s,a=!1)=>{const r=a?`/api/order/admin/${s}/cancel`:`/api/order/${s}/cancel`;return h.post(r)},deleteOrder:async(s,a=!1)=>{const r=a?`/api/order/admin/${s}`:`/api/order/${s}`;return h.delete(r)},exportOrders:async(s={},a="csv")=>{const r=new URLSearchParams;return Object.entries(s).forEach(([n,t])=>{t!=null&&t!==""&&r.append(n,String(t))}),r.append("format",a),await h.get(`/api/order/export?${r.toString()}`,{responseType:"blob"})}},ds=(s={})=>oe({queryKey:C.orders.list(s),queryFn:()=>_.getOrders(s)}),ms=()=>{const s=L();return $({mutationFn:({data:a,isAdmin:r})=>_.placeOrder(a,r),onSuccess:()=>{s.invalidateQueries({queryKey:C.orders.all}),w.success("Order placed successfully")},onError:a=>{const r=a;w.error(r.response?.data?.message||"Failed to place order")}})},us=()=>{const s=L();return $({mutationFn:({id:a,status:r,isAdmin:o})=>_.updateOrderStatus(a,r,o),onSuccess:(a,r)=>{s.invalidateQueries({queryKey:C.orders.all}),s.invalidateQueries({queryKey:C.orders.detail(r.id)}),w.success("Order status updated")},onError:a=>{const r=a;w.error(r.response?.data?.message||"Failed to update order status")}})},ps=()=>{const s=L();return $({mutationFn:({id:a,isAdmin:r})=>_.cancelOrder(a,r),onSuccess:(a,r)=>{s.invalidateQueries({queryKey:C.orders.all}),s.invalidateQueries({queryKey:C.orders.detail(r.id)}),w.success("Order cancelled")},onError:a=>{const r=a;w.error(r.response?.data?.message||"Failed to cancel order")}})},xs=[{value:"waiting for payment information",label:"Waiting for Payment",icon:X,color:"text-yellow-600"},{value:"assembling kits",label:"Assembling Kits",icon:q,color:"text-blue-600"},{value:"paid",label:"Paid",icon:A,color:"text-green-600"},{value:"complete",label:"Complete",icon:A,color:"text-green-600"},{value:"cancelled",label:"Cancelled",icon:he,color:"text-red-600"}],hs=[{value:"purchase",label:"Purchase",icon:q},{value:"service",label:"Service",icon:ge}];function W({column:s,title:a,options:r}){const o=s?.getFacetedUniqueValues(),n=new Set(s?.getFilterValue());return e.jsxs(qe,{children:[e.jsx(_e,{asChild:!0,children:e.jsxs(x,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),a,n?.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:n.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:n.size>2?e.jsxs(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[n.size," selected"]}):r.filter(t=>n.has(t.value)).map(t=>e.jsx(k,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:t.label},t.value))})]})]})}),e.jsx(Ie,{className:"w-[200px] p-0",align:"start",children:e.jsxs(Ce,{children:[e.jsx(Ne,{placeholder:a}),e.jsxs(Se,{children:[e.jsx(Oe,{children:"No results found."}),e.jsx(E,{children:r.map(t=>{const m=n.has(t.value);return e.jsxs(H,{onSelect:()=>{m?n.delete(t.value):n.add(t.value);const u=Array.from(n);s?.setFilterValue(u.length?u:void 0)},children:[e.jsx("div",{className:v("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",m?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ye,{className:v("h-4 w-4")})}),t.icon&&e.jsx(t.icon,{className:v("mr-2 h-4 w-4 text-muted-foreground",t.color)}),e.jsx("span",{children:t.label}),o?.get(t.value)&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:o.get(t.value)})]},t.value)})}),n.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Pe,{}),e.jsx(E,{children:e.jsx(H,{onSelect:()=>s?.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function gs({table:s}){return e.jsxs(J,{children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(x,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(Y,{align:"end",className:"w-[150px]",children:[e.jsx(ze,{children:"Toggle columns"}),e.jsx(z,{}),s.getAllColumns().filter(a=>typeof a.accessorFn<"u"&&a.getCanHide()).map(a=>e.jsx(Le,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:r=>a.toggleVisibility(!!r),children:a.id},a.id))]})]})}function js({table:s}){const a=s.getState().columnFilters.length>0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(V,{placeholder:"Search orders...",value:s.getColumn("_id")?.getFilterValue()??"",onChange:r=>s.getColumn("_id")?.setFilterValue(r.target.value),className:"h-8 w-[150px] lg:w-[250px]"}),e.jsxs("div",{className:"flex gap-x-2",children:[s.getColumn("status")&&e.jsx(W,{column:s.getColumn("status"),title:"Status",options:xs}),s.getColumn("type")&&e.jsx(W,{column:s.getColumn("type"),title:"Type",options:hs})]}),a&&e.jsxs(x,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(be,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(gs,{table:s})]})}function ys({columns:s,data:a,isLoading:r,pageCount:o,onPaginationChange:n}){const{table:t}=pe({data:a,columns:s,pageCount:o,manualPagination:!!n,onPaginationChange:n});return e.jsx(xe,{table:t,columns:s,isLoading:r,toolbar:e.jsx(js,{table:t}),showToolbar:!0})}const fs=ee(["purchase","service"]),bs=ee(["waiting for payment information","assembling kits","complete","paid","cancelled",""]),vs=K([c(),N({_id:c(),code:c(),percentage:D()}),We()]),ws=K([c(),N({_id:c(),name:c()})]),Cs=K([c(),N({_id:c(),email:c(),firstName:c().optional(),lastName:c().optional()})]),Ns=N({_id:c(),user:Cs,type:fs,discount:vs.optional(),status:bs,notes:c().optional(),address:c().optional(),quantity:D(),createdAt:D(),company:ws});Z(Ns);const Ss=N({quantity:D().min(1),addresses:Z(N({address:c().min(1,"Address is required"),quantity:D().min(1)})),provideShippingLater:Ue(),notes:c().optional()}),Os=s=>({"waiting for payment information":"Waiting for Payment","assembling kits":"Assembling Kits",complete:"Complete",paid:"Paid",cancelled:"Cancelled","":"Unknown"})[s]||s,Ps=s=>({purchase:"Purchase",service:"Service"})[s]||s,Ts=s=>({"waiting for payment information":"text-yellow-600 bg-yellow-50","assembling kits":"text-blue-600 bg-blue-50",complete:"text-green-600 bg-green-50",paid:"text-green-600 bg-green-50",cancelled:"text-red-600 bg-red-50","":"text-gray-600 bg-gray-50"})[s]||"text-gray-600 bg-gray-50";function ks({row:s}){const a=te(),r=s.original,o=us(),n=ps(),t=l=>{o.mutate({id:r._id,status:l})},m=()=>{n.mutate({id:r._id})},u=[{value:"waiting for payment information",label:"Waiting for Payment",icon:X},{value:"assembling kits",label:"Assembling Kits",icon:q},{value:"paid",label:"Paid",icon:A},{value:"complete",label:"Complete",icon:A}];return e.jsxs(J,{children:[e.jsx($e,{asChild:!0,children:e.jsxs(x,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(Y,{align:"end",className:"w-[160px]",children:[e.jsxs(S,{onClick:()=>a({to:`/orders/${r._id}`}),children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(S,{children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Edit Order"]}),e.jsxs(S,{children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"View Invoice"]}),e.jsx(z,{}),e.jsxs(Ke,{children:[e.jsxs(Ee,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Update Status"]}),e.jsx(He,{children:e.jsx(Qe,{value:r.status,onValueChange:l=>t(l),children:u.map(l=>e.jsxs(Re,{value:l.value,disabled:r.status===l.value,children:[e.jsx(l.icon,{className:"mr-2 h-4 w-4"}),l.label]},l.value))})})]}),e.jsx(z,{}),e.jsxs(S,{onClick:m,disabled:r.status==="cancelled"||r.status==="complete",children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),"Cancel Order",e.jsx(Q,{children:"⌘⌫"})]}),e.jsxs(S,{className:"text-red-600",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Delete",e.jsx(Q,{children:"⌘⌫"})]})]})]})}const Ds=[{id:"select",header:({table:s})=>e.jsx(R,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),meta:{className:v("sticky md:table-cell left-0 z-10 rounded-tl","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted")},cell:({row:s})=>e.jsx(R,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"_id",header:({column:s})=>e.jsx(g,{column:s,title:"Order ID"}),cell:({row:s})=>e.jsx("div",{className:"font-mono text-xs",children:s.getValue("_id")}),meta:{className:v("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell")},enableHiding:!1},{id:"customer",header:({column:s})=>e.jsx(g,{column:s,title:"Customer"}),cell:({row:s})=>{const a=s.original.user;if(typeof a=="string")return e.jsxs("div",{children:["User ID: ",a]});const r=`${a.firstName||""} ${a.lastName||""}`.trim()||a.email;return e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.email})]})}},{accessorKey:"type",header:({column:s})=>e.jsx(g,{column:s,title:"Type"}),cell:({row:s})=>{const a=s.getValue("type");return e.jsx(k,{variant:"outline",className:"capitalize",children:Ps(a)})},filterFn:(s,a,r)=>r.includes(s.getValue(a))},{accessorKey:"quantity",header:({column:s})=>e.jsx(g,{column:s,title:"Quantity"}),cell:({row:s})=>e.jsx("div",{className:"text-center",children:s.getValue("quantity")})},{accessorKey:"status",header:({column:s})=>e.jsx(g,{column:s,title:"Status"}),cell:({row:s})=>{const a=s.getValue("status");return e.jsx(k,{variant:"outline",className:v("capitalize",Ts(a)),children:Os(a)})},filterFn:(s,a,r)=>r.includes(s.getValue(a))},{id:"company",header:({column:s})=>e.jsx(g,{column:s,title:"Company"}),cell:({row:s})=>{const a=s.original.company,r=typeof a=="object"?a.name:"N/A";return e.jsx("div",{className:"w-fit text-nowrap",children:r})}},{accessorKey:"address",header:({column:s})=>e.jsx(g,{column:s,title:"Address"}),cell:({row:s})=>{const a=s.getValue("address");return a?e.jsx(Be,{className:"max-w-48",children:a}):e.jsx("span",{className:"text-muted-foreground",children:"No address"})}},{accessorKey:"createdAt",header:({column:s})=>e.jsx(g,{column:s,title:"Created"}),cell:({row:s})=>{const a=s.getValue("createdAt"),r=new Date(a*1e3);return e.jsxs("div",{className:"text-nowrap",children:[B(r,"MMM dd, yyyy"),e.jsx("div",{className:"text-xs text-muted-foreground",children:B(r,"h:mm a")})]})}},{id:"actions",cell:ks}],ae=j.createContext(null);function re(){const s=j.useContext(ae);if(!s)throw new Error("useOrdersContext must be used within an OrdersProvider");return s}function Fs(){const{setPlaceOrderOpen:s}=re();return e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(x,{onClick:()=>s(!0),children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Place Order"]})})}function As({open:s,onOpenChange:a}){const[r,o]=j.useState(!1),n=ms(),t=Ye({resolver:Ze(Ss),defaultValues:{quantity:1,addresses:[{address:"",quantity:1}],provideShippingLater:!1,notes:""}}),{fields:m,append:u,remove:l}=es({control:t.control,name:"addresses"}),f=async i=>{o(!0);try{await n.mutateAsync({data:i}),t.reset(),a(!1)}catch{}finally{o(!1)}},y=t.watch("addresses").reduce((i,p)=>i+(p.quantity||0),0);return e.jsx(Te,{open:s,onOpenChange:a,children:e.jsxs(ke,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(De,{children:[e.jsx(Fe,{children:"Place New Order"}),e.jsx(Ae,{children:"Fill out the form below to place a new order."})]}),e.jsx(ss,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(f),className:"space-y-6",children:[e.jsx(O,{control:t.control,name:"quantity",render:({field:i})=>e.jsxs(P,{children:[e.jsx(b,{children:"Total Quantity"}),e.jsx(T,{children:e.jsx(V,{type:"number",min:1,...i,onChange:p=>i.onChange(parseInt(p.target.value))})}),e.jsx(M,{children:"Total number of items in this order"}),e.jsx(F,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"Shipping Addresses"}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>u({address:"",quantity:1}),children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),"Add Address"]})]}),m.map((i,p)=>e.jsx("div",{className:"space-y-4 p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(O,{control:t.control,name:`addresses.${p}.address`,render:({field:d})=>e.jsxs(P,{children:[e.jsxs(b,{children:["Address ",p+1]}),e.jsx(T,{children:e.jsx(U,{placeholder:"Enter shipping address",className:"min-h-[80px]",...d})}),e.jsx(F,{})]})}),e.jsx(O,{control:t.control,name:`addresses.${p}.quantity`,render:({field:d})=>e.jsxs(P,{children:[e.jsx(b,{children:"Quantity for this address"}),e.jsx(T,{children:e.jsx(V,{type:"number",min:1,...d,onChange:I=>d.onChange(parseInt(I.target.value))})}),e.jsx(F,{})]})})]}),m.length>1&&e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>l(p),className:"ml-2",children:e.jsx(se,{className:"h-4 w-4"})})]})},i.id)),y>0&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total quantity across all addresses: ",y]})]}),e.jsx(O,{control:t.control,name:"provideShippingLater",render:({field:i})=>e.jsxs(P,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{className:"text-base",children:"Provide shipping later"}),e.jsx(M,{children:"Check this if shipping addresses will be provided later"})]}),e.jsx(T,{children:e.jsx(as,{checked:i.value,onCheckedChange:i.onChange})})]})}),e.jsx(O,{control:t.control,name:"notes",render:({field:i})=>e.jsxs(P,{children:[e.jsx(b,{children:"Order Notes"}),e.jsx(T,{children:e.jsx(U,{placeholder:"Any additional notes for this order",className:"min-h-[100px]",...i})}),e.jsx(M,{children:"Optional notes or special instructions"}),e.jsx(F,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:r,children:"Cancel"}),e.jsx(x,{type:"submit",disabled:r,children:r?"Placing Order...":"Place Order"})]})]})})]})})}function qs(){const{placeOrderOpen:s,setPlaceOrderOpen:a}=re();return e.jsx(e.Fragment,{children:e.jsx(As,{open:s,onOpenChange:a})})}function _s({children:s}){const[a,r]=j.useState(!1);return e.jsx(ae.Provider,{value:{placeOrderOpen:a,setPlaceOrderOpen:r},children:s})}function Is(){const s=ne({strict:!1}),[a,r]=j.useState({page:1,pageSize:10,sortBy:"createdAt",sortOrder:"desc",company:s.company,isAdmin:!0}),[o,n]=j.useState(1),{data:t,isLoading:m,error:u}=ds(a);return j.useEffect(()=>{t?.meta?.pagination?.totalPages&&n(t.meta.pagination.totalPages)},[t?.meta?.pagination?.totalPages]),j.useEffect(()=>{r(l=>({...l,company:s.company,page:1,isAdmin:!0}))},[s.company]),e.jsxs(_s,{children:[e.jsxs(le,{fixed:!0,children:[e.jsx(ie,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(ce,{}),e.jsx(de,{}),e.jsx(me,{})]})]}),e.jsxs(ue,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track all customer orders"})]}),e.jsx(Fs,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:u?e.jsxs(ts,{variant:"destructive",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx(os,{children:"Failed to load orders. Please try again later."})]}):e.jsx(ys,{columns:Ds,data:t?.data||[],isLoading:m,pageCount:t?.meta?.pagination?.totalPages||o,pagination:{pageIndex:(a.page||1)-1,pageSize:a.pageSize||10},onPaginationChange:({pageIndex:l,pageSize:f})=>{r(y=>({...y,page:l+1,pageSize:f}))}})})]}),e.jsx(qs,{})]})}const va=function(){return e.jsx(Is,{})};export{va as component};
