import{r as q,j as e,a9 as L,B as x,d as y,a as oe}from"./index-Dv1JWxNr.js";import{u as ie,q as ce,H as de,S as me,a as he,T as ue,P as pe,M as xe}from"./header-company-dropdown--Awgxzay.js";import{B as b}from"./badge-KVwFvJ3A.js";import{C as P}from"./checkbox-9cVOoBuM.js";import{D as f}from"./data-table-column-header-BQ28lyg8.js";import{L as M}from"./long-text-29-VbLTc.js";import{c as v}from"./createReactComponent-DEfHJg2M.js";import{u as I,l as u,f as ge,s as n,o as w,b as k,a as je,Z as N}from"./types-Wky072k2.js";import{D as fe,P as ve,C as Ne,M as ye,a as be}from"./react-icons.esm-BLmnETz0.js";import{D as H,e as we,f as O,i as F,p as U,h as B,J as Ce,B as Se,g as ke,z as Ie}from"./avatar-BAwvz_Zl.js";import{u as De,S as K,C as Te}from"./confirm-dialog-DbxrcrYb.js";import{I as Pe}from"./IconEdit-D18gFsvS.js";import{I as Me}from"./IconTrash-BDNJy_tT.js";import{u as $,a as G,F as J,b as c,c as d,d as m,e as p,f as h,L as Fe}from"./form-CZQoOBB7.js";import{s as D}from"./show-submitted-data-Ca1VZhwQ.js";import{D as Z,g as Q,h as W,i as X,j as Y,k as ee,l as Ue,C as Ae,a as ze,b as Ve,c as _e,d as A,e as z,f as Re}from"./command-DcTOLZl5.js";import{I as j}from"./input-B_unVzQI.js";import{P as V}from"./password-input-BLB55z9M.js";import{A as se,b as Ee,a as ae,I as qe}from"./alert-QKjxu_J9.js";import{T as Le}from"./textarea-C-bf1LMq.js";import{I as He}from"./IconSend-BacYffmX.js";import{u as Oe,D as Be}from"./use-data-table-BNvWa4ET.js";import{P as Ke,a as $e,b as Ge}from"./popover-UlTbB9Ed.js";import{S as Je}from"./separator-C7xfAAuo.js";import{g as Ze}from"./users-api-DbPW515O.js";import"./select-C_Vy9nNB.js";import"./index-BmzB4KP7.js";import"./index-CHnWnazZ.js";import"./index-DF1ouENV.js";import"./index-D-kAnGCt.js";import"./index-CEbF_H-L.js";import"./index-GwslycKq.js";import"./index-Bx3FAcJY.js";import"./check-BqR35Gvj.js";import"./index-jslwB8KE.js";import"./index-mCotDcwq.js";import"./alert-dialog-7a_uNcYv.js";import"./IconEye-BgqFb6dd.js";import"./table-CR31dl_A.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qe=v("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var We=v("outline","cash","IconCash",[["path",{d:"M7 15h-3a1 1 0 0 1 -1 -1v-8a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v3",key:"svg-0"}],["path",{d:"M7 9m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M12 14a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var re=v("outline","mail-plus","IconMailPlus",[["path",{d:"M12 19h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v5.5",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xe=v("outline","shield","IconShield",[["path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _=v("outline","user-shield","IconUserShield",[["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h2",key:"svg-0"}],["path",{d:"M22 16c0 4 -2.5 6 -3.5 6s-3.5 -2 -3.5 -6c1 0 2.5 -.5 3.5 -1.5c1 1 2.5 1.5 3.5 1.5z",key:"svg-1"}],["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S=v("outline","users-group","IconUsersGroup",[["path",{d:"M10 13a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M8 21v-1a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v1",key:"svg-1"}],["path",{d:"M15 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}],["path",{d:"M17 10h2a2 2 0 0 1 2 2v1",key:"svg-3"}],["path",{d:"M5 5a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-4"}],["path",{d:"M3 13v-1a2 2 0 0 1 2 -2h2",key:"svg-5"}]]);const Ye=new Map([["active","bg-teal-100/30 text-teal-900 dark:text-teal-200 border-teal-200"],["inactive","bg-neutral-300/40 border-neutral-300"],["pending","bg-sky-200/40 text-sky-900 dark:text-sky-100 border-sky-300"]]),C=[{label:"Superadmin",value:"superadmin",icon:Xe},{label:"Admin",value:"admin",icon:_},{label:"Owner",value:"owner",icon:_},{label:"Organization",value:"org",icon:S},{label:"Manager",value:"manager",icon:S},{label:"Leasing Agent",value:"leasingAgent",icon:S},{label:"Agent",value:"agent",icon:We}],es=I([u("agent"),u("admin"),u("org"),u("superadmin"),u("owner"),u("leasingAgent"),u("manager")]),ss=I([u("superadmin"),u("leasingAgent"),u("admin"),u(""),ge()]),as=I([n(),w({_id:n(),name:n()})]),rs=w({_id:n(),email:n().email(),firstName:n().optional(),lastName:n().optional(),role:es,adminPanelRole:ss.optional(),active:k(),pending:k(),phone:n().optional(),jobTitle:n().optional(),profileImage:n().optional(),description:n().optional(),company:as,createdAt:n(),updatedAt:n()});je(rs);const ls=s=>s.active?s.pending?"pending":"active":"inactive",le=L.createContext(null);function ts({children:s}){const[a,r]=De(null),[t,l]=q.useState(null);return e.jsx(le,{value:{open:a,setOpen:r,currentRow:t,setCurrentRow:l},children:s})}const T=()=>{const s=L.useContext(le);if(!s)throw new Error("useUsers has to be used within <UsersContext>");return s};function ns({row:s}){const{setOpen:a,setCurrentRow:r}=T();return e.jsx(e.Fragment,{children:e.jsxs(H,{modal:!1,children:[e.jsx(we,{asChild:!0,children:e.jsxs(x,{variant:"ghost",className:"data-[state=open]:bg-muted flex h-8 w-8 p-0",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(O,{align:"end",className:"w-[160px]",children:[e.jsxs(F,{onClick:()=>{r(s.original),a("edit")},children:["Edit",e.jsx(U,{children:e.jsx(Pe,{size:16})})]}),e.jsx(B,{}),e.jsxs(F,{onClick:()=>{r(s.original),a("delete")},className:"text-red-500!",children:["Delete",e.jsx(U,{children:e.jsx(Me,{size:16})})]})]})]})})}const os=[{id:"select",header:({table:s})=>e.jsx(P,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),meta:{className:y("sticky md:table-cell left-0 z-10 rounded-tl","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted")},cell:({row:s})=>e.jsx(P,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"email",header:({column:s})=>e.jsx(f,{column:s,title:"Email"}),cell:({row:s})=>e.jsx(M,{className:"max-w-48",children:s.getValue("email")}),meta:{className:y("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell")},enableHiding:!1},{id:"fullName",header:({column:s})=>e.jsx(f,{column:s,title:"Name"}),cell:({row:s})=>{const{firstName:a="",lastName:r=""}=s.original,t=`${a} ${r}`.trim()||"No Name";return e.jsx(M,{className:"max-w-36",children:t})},meta:{className:"w-36"}},{id:"company",header:({column:s})=>e.jsx(f,{column:s,title:"Company"}),cell:({row:s})=>{const a=s.original.company,r=typeof a=="object"?a.name:"N/A";return e.jsx("div",{className:"w-fit text-nowrap",children:r})}},{accessorKey:"phone",header:({column:s})=>e.jsx(f,{column:s,title:"Phone Number"}),cell:({row:s})=>e.jsx("div",{children:s.getValue("phone")||"N/A"}),enableSorting:!1},{accessorKey:"status",accessorFn:s=>ls(s),header:({column:s})=>e.jsx(f,{column:s,title:"Status"}),cell:({row:s})=>{const a=s.getValue("status"),r=Ye.get(a);return e.jsx("div",{className:"flex space-x-2",children:e.jsx(b,{variant:"outline",className:y("capitalize",r),children:a})})},filterFn:(s,a,r)=>r.includes(s.getValue(a)),enableHiding:!1,enableSorting:!1},{accessorKey:"role",header:({column:s})=>e.jsx(f,{column:s,title:"Role"}),cell:({row:s})=>{const{role:a}=s.original,r=C.find(({value:t})=>t===a);return r?e.jsxs("div",{className:"flex items-center gap-x-2",children:[r.icon&&e.jsx(r.icon,{size:16,className:"text-muted-foreground"}),e.jsx("span",{className:"text-sm capitalize",children:s.getValue("role")})]}):null},filterFn:(s,a,r)=>r.includes(s.getValue(a)),enableSorting:!1,enableHiding:!1},{id:"actions",cell:ns}],is=w({firstName:n().min(1,{message:"First Name is required."}),lastName:n().min(1,{message:"Last Name is required."}),username:n().min(1,{message:"Username is required."}),phoneNumber:n().min(1,{message:"Phone number is required."}),email:n().min(1,{message:"Email is required."}).email({message:"Email is invalid."}),password:n().transform(s=>s.trim()),role:n().min(1,{message:"Role is required."}),confirmPassword:n().transform(s=>s.trim()),isEdit:k()}).superRefine(({isEdit:s,password:a,confirmPassword:r},t)=>{(!s||s&&a!=="")&&(a===""&&t.addIssue({code:N.custom,message:"Password is required.",path:["password"]}),a.length<8&&t.addIssue({code:N.custom,message:"Password must be at least 8 characters long.",path:["password"]}),a.match(/[a-z]/)||t.addIssue({code:N.custom,message:"Password must contain at least one lowercase letter.",path:["password"]}),a.match(/\d/)||t.addIssue({code:N.custom,message:"Password must contain at least one number.",path:["password"]}),a!==r&&t.addIssue({code:N.custom,message:"Passwords don't match.",path:["confirmPassword"]}))});function R({currentRow:s,open:a,onOpenChange:r}){const t=!!s,l=$({resolver:G(is),defaultValues:t?{...s,password:"",confirmPassword:"",isEdit:t}:{firstName:"",lastName:"",username:"",email:"",role:"",phoneNumber:"",password:"",confirmPassword:"",isEdit:t}}),i=o=>{l.reset(),D(o),r(!1)},g=!!l.formState.dirtyFields.password;return e.jsx(Z,{open:a,onOpenChange:o=>{l.reset(),r(o)},children:e.jsxs(Q,{className:"sm:max-w-lg",children:[e.jsxs(W,{className:"text-left",children:[e.jsx(X,{children:t?"Edit User":"Add New User"}),e.jsxs(Y,{children:[t?"Update the user here. ":"Create new user here. ","Click save when you're done."]})]}),e.jsx("div",{className:"-mr-4 h-[26.25rem] w-full overflow-y-auto py-1 pr-4",children:e.jsx(J,{...l,children:e.jsxs("form",{id:"user-form",onSubmit:l.handleSubmit(i),className:"space-y-4 p-0.5",children:[e.jsx(c,{control:l.control,name:"firstName",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"First Name"}),e.jsx(p,{children:e.jsx(j,{placeholder:"John",className:"col-span-4",autoComplete:"off",...o})}),e.jsx(h,{className:"col-span-4 col-start-3"})]})}),e.jsx(c,{control:l.control,name:"lastName",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"Last Name"}),e.jsx(p,{children:e.jsx(j,{placeholder:"Doe",className:"col-span-4",autoComplete:"off",...o})}),e.jsx(h,{className:"col-span-4 col-start-3"})]})}),e.jsx(c,{control:l.control,name:"username",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"Username"}),e.jsx(p,{children:e.jsx(j,{placeholder:"john_doe",className:"col-span-4",...o})}),e.jsx(h,{className:"col-span-4 col-start-3"})]})}),e.jsx(c,{control:l.control,name:"email",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"Email"}),e.jsx(p,{children:e.jsx(j,{placeholder:"john.doe@gmail.com",className:"col-span-4",...o})}),e.jsx(h,{className:"col-span-4 col-start-3"})]})}),e.jsx(c,{control:l.control,name:"phoneNumber",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"Phone Number"}),e.jsx(p,{children:e.jsx(j,{placeholder:"+123456789",className:"col-span-4",...o})}),e.jsx(h,{className:"col-span-4 col-start-3"})]})}),e.jsx(c,{control:l.control,name:"role",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"Role"}),e.jsx(K,{defaultValue:o.value,onValueChange:o.onChange,placeholder:"Select a role",className:"col-span-4",items:C.map(({label:te,value:ne})=>({label:te,value:ne}))}),e.jsx(h,{className:"col-span-4 col-start-3"})]})}),e.jsx(c,{control:l.control,name:"password",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"Password"}),e.jsx(p,{children:e.jsx(V,{placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...o})}),e.jsx(h,{className:"col-span-4 col-start-3"})]})}),e.jsx(c,{control:l.control,name:"confirmPassword",render:({field:o})=>e.jsxs(d,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(m,{className:"col-span-2 text-right",children:"Confirm Password"}),e.jsx(p,{children:e.jsx(V,{disabled:!g,placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...o})}),e.jsx(h,{className:"col-span-4 col-start-3"})]})})]})})}),e.jsx(ee,{children:e.jsx(x,{type:"submit",form:"user-form",children:"Save changes"})})]})})}function cs({open:s,onOpenChange:a,currentRow:r}){const[t,l]=q.useState(""),i=()=>{t.trim()===r.email&&(a(!1),D(r,"The following user has been deleted:"))};return e.jsx(Te,{open:s,onOpenChange:a,handleConfirm:i,disabled:t.trim()!==r.email,title:e.jsxs("span",{className:"text-destructive",children:[e.jsx(Qe,{className:"stroke-destructive mr-1 inline-block",size:18})," ","Delete User"]}),desc:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-bold",children:r.email}),"?",e.jsx("br",{}),"This action will permanently remove the user with the role of"," ",e.jsx("span",{className:"font-bold",children:r.role.toUpperCase()})," ","from the system. This cannot be undone."]}),e.jsxs(Fe,{className:"my-2",children:["Email:",e.jsx(j,{value:t,onChange:g=>l(g.target.value),placeholder:"Enter email to confirm deletion."})]}),e.jsxs(se,{variant:"destructive",children:[e.jsx(Ee,{children:"Warning!"}),e.jsx(ae,{children:"Please be carefull, this operation can not be rolled back."})]})]}),confirmText:"Delete",destructive:!0})}const ds=w({email:n().min(1,{message:"Email is required."}).email({message:"Email is invalid."}),role:n().min(1,{message:"Role is required."}),desc:n().optional()});function ms({open:s,onOpenChange:a}){const r=$({resolver:G(ds),defaultValues:{email:"",role:"",desc:""}}),t=l=>{r.reset(),D(l),a(!1)};return e.jsx(Z,{open:s,onOpenChange:l=>{r.reset(),a(l)},children:e.jsxs(Q,{className:"sm:max-w-md",children:[e.jsxs(W,{className:"text-left",children:[e.jsxs(X,{className:"flex items-center gap-2",children:[e.jsx(re,{})," Invite User"]}),e.jsx(Y,{children:"Invite new user to join your team by sending them an email invitation. Assign a role to define their access level."})]}),e.jsx(J,{...r,children:e.jsxs("form",{id:"user-invite-form",onSubmit:r.handleSubmit(t),className:"space-y-4",children:[e.jsx(c,{control:r.control,name:"email",render:({field:l})=>e.jsxs(d,{children:[e.jsx(m,{children:"Email"}),e.jsx(p,{children:e.jsx(j,{type:"email",placeholder:"eg: john.doe@gmail.com",...l})}),e.jsx(h,{})]})}),e.jsx(c,{control:r.control,name:"role",render:({field:l})=>e.jsxs(d,{className:"space-y-1",children:[e.jsx(m,{children:"Role"}),e.jsx(K,{defaultValue:l.value,onValueChange:l.onChange,placeholder:"Select a role",items:C.map(({label:i,value:g})=>({label:i,value:g}))}),e.jsx(h,{})]})}),e.jsx(c,{control:r.control,name:"desc",render:({field:l})=>e.jsxs(d,{className:"",children:[e.jsx(m,{children:"Description (optional)"}),e.jsx(p,{children:e.jsx(Le,{className:"resize-none",placeholder:"Add a personal note to your invitation (optional)",...l})}),e.jsx(h,{})]})})]})}),e.jsxs(ee,{className:"gap-y-2",children:[e.jsx(Ue,{asChild:!0,children:e.jsx(x,{variant:"outline",children:"Cancel"})}),e.jsxs(x,{type:"submit",form:"user-invite-form",children:["Invite ",e.jsx(He,{})]})]})]})})}function hs(){const{open:s,setOpen:a,currentRow:r,setCurrentRow:t}=T();return e.jsxs(e.Fragment,{children:[e.jsx(R,{open:s==="add",onOpenChange:()=>a("add")},"user-add"),e.jsx(ms,{open:s==="invite",onOpenChange:()=>a("invite")},"user-invite"),r&&e.jsxs(e.Fragment,{children:[e.jsx(R,{open:s==="edit",onOpenChange:()=>{a("edit"),setTimeout(()=>{t(null)},500)},currentRow:r},`user-edit-${r._id}`),e.jsx(cs,{open:s==="delete",onOpenChange:()=>{a("delete"),setTimeout(()=>{t(null)},500)},currentRow:r},`user-delete-${r._id}`)]})]})}function us(){const{setOpen:s}=T();return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",className:"space-x-1",onClick:()=>s("invite"),children:[e.jsx("span",{children:"Invite User"})," ",e.jsx(re,{size:18})]}),e.jsxs(x,{className:"space-x-1",onClick:()=>s("add"),children:[e.jsx("span",{children:"Add User"})," ",e.jsx(Ce,{size:18})]})]})}function E({column:s,title:a,options:r}){const t=s?.getFacetedUniqueValues(),l=new Set(s?.getFilterValue());return e.jsxs(Ke,{children:[e.jsx($e,{asChild:!0,children:e.jsxs(x,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(ve,{className:"h-4 w-4"}),a,l?.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(b,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:l.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:l.size>2?e.jsxs(b,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[l.size," selected"]}):r.filter(i=>l.has(i.value)).map(i=>e.jsx(b,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:i.label},i.value))})]})]})}),e.jsx(Ge,{className:"w-[200px] p-0",align:"start",children:e.jsxs(Ae,{children:[e.jsx(ze,{placeholder:a}),e.jsxs(Ve,{children:[e.jsx(_e,{children:"No results found."}),e.jsx(A,{children:r.map(i=>{const g=l.has(i.value);return e.jsxs(z,{onSelect:()=>{g?l.delete(i.value):l.add(i.value);const o=Array.from(l);s?.setFilterValue(o.length?o:void 0)},children:[e.jsx("div",{className:y("border-primary flex h-4 w-4 items-center justify-center rounded-sm border",g?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Ne,{className:y("h-4 w-4")})}),i.icon&&e.jsx(i.icon,{className:"text-muted-foreground h-4 w-4"}),e.jsx("span",{children:i.label}),t?.get?.(i.value)?e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:t.get(i.value)}):null]},i.value)})}),l.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{}),e.jsx(A,{children:e.jsx(z,{onSelect:()=>s?.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function ps({table:s}){return e.jsxs(H,{modal:!1,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(x,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(O,{align:"end",className:"w-[150px]",children:[e.jsx(ke,{children:"Toggle columns"}),e.jsx(B,{}),s.getAllColumns().filter(a=>typeof a.accessorFn<"u"&&a.getCanHide()).map(a=>e.jsx(Ie,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:r=>a.toggleVisibility(!!r),children:a.id},a.id))]})]})}function xs({table:s}){const a=s.getState().columnFilters.length>0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(j,{placeholder:"Filter by email...",value:s.getColumn("email")?.getFilterValue()??"",onChange:r=>s.getColumn("email")?.setFilterValue(r.target.value),className:"h-8 w-[150px] lg:w-[250px]"}),e.jsxs("div",{className:"flex gap-x-2",children:[s.getColumn("status")&&e.jsx(E,{column:s.getColumn("status"),title:"Status",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Pending",value:"pending"}]}),s.getColumn("role")&&e.jsx(E,{column:s.getColumn("role"),title:"Role",options:C.map(r=>({...r}))})]}),a&&e.jsxs(x,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(be,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(ps,{table:s})]})}function gs({columns:s,data:a=[],isLoading:r}){const{table:t}=Oe({data:a,columns:s});return e.jsx(Be,{table:t,columns:s,isLoading:r,toolbar:e.jsx(xs,{table:t}),showToolbar:!0})}const js=(s={})=>ie({queryKey:ce.users.list(s),queryFn:()=>Ze(s),staleTime:5*60*1e3});function fs(){const s=oe({strict:!1}),{data:a=[],isLoading:r,error:t}=js({company:s.company});return e.jsxs(ts,{children:[e.jsxs(de,{fixed:!0,children:[e.jsx(me,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(he,{}),e.jsx(ue,{}),e.jsx(pe,{})]})]}),e.jsxs(xe,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"User List"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your users and their roles here."})]}),e.jsx(us,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:t?e.jsxs(se,{variant:"destructive",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx(ae,{children:"Failed to load users. Please try again later."})]}):e.jsx(gs,{data:a,columns:os,isLoading:r})})]}),e.jsx(hs,{})]})}const la=fs;export{la as component};
