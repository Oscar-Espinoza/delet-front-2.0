import{f as Q,t as N,r as f,j as e,e as $,B as w,d as _,a as be}from"./index-CsPbyjqq.js";import{A as De,I as ke,a as Se}from"./alert-BtjweUsc.js";import{u as le,b as Y,q as E,c as F,H as Ae,S as Ke,a as Te,T as Ie,P as Fe,M as _e}from"./theme-switch-BkO31Og6.js";import{u as ie,a as oe,F as ce,b as x,c as h,d as u,e as g,f as p}from"./form-DKoAMwr-.js";import{B as C}from"./badge-Dwoct147.js";import{D as W,a as J,b as X,c as Z,d as ee,X as de,e as me,C as Ve,f as Ee,g as Pe,h as Oe,i as se,j as te,k as ze}from"./command-DOxIIFlo.js";import{I as v}from"./input-5SQVrAtH.js";import{s as xe,M as he,C as $e}from"./multi-select-Bq7fdHjx.js";import{S as M,a as H,b as q,c as L,d as V}from"./select-CcSKRIFJ.js";import{T as R}from"./textarea-DKq9H4p7.js";import{C as ue}from"./company-select-CKLOAwIm.js";import{h as pe}from"./hardware-api-i12_pP4F.js";import{o as ge,a as ae,s as y,n as Me}from"./types-Wky072k2.js";import{A as He,a as qe,b as Le,c as Re,d as Ue,e as Be,f as Ge,g as Qe}from"./alert-dialog-DWkdR42t.js";import{u as Ye,D as We}from"./use-data-table-Cl1qhkDL.js";import{P as Je,C as Xe,M as Ze,a as es,D as ss}from"./react-icons.esm-B0xYXpOp.js";import{P as ts,a as as,b as rs}from"./popover-segQm2pA.js";import{S as ns}from"./separator-c02Ge6Zo.js";import{D as je,B as ls,f as fe,g as is,h as ye,z as os,e as cs,i as G,p as ds}from"./avatar-Dwr00yMn.js";import{C as re}from"./checkbox-CKYs508e.js";import{D as S}from"./data-table-column-header-CQlxrAjV.js";import{L as ms}from"./long-text-Dwtw9Xhu.js";import"./createReactComponent-BW_frDSn.js";import"./index-BjDkRKFr.js";import"./index-D3GDyaHS.js";import"./index-BWqx2Go7.js";import"./index-DMmlQz9C.js";import"./index-DSb8P5hH.js";import"./chevrons-up-down-CuYahFvy.js";import"./check-D2987ydO.js";import"./index-DMPFB69W.js";import"./index-DZz0vwHh.js";import"./index-BB0IJgGb.js";import"./table-D4KWq3W4.js";import"./index-CzDhUyC5.js";const O={getKits:async s=>{const t=new URLSearchParams;s?.company&&t.append("companies",s.company);const a=`/api/kits/admin/list${t.toString()?`?${t.toString()}`:""}`;return F.get(a)},getKit:async s=>F.get(`/api/kits/${s}`),createKit:async s=>F.post("/api/kits",s),updateKit:async({_id:s,...t})=>F.patch(`/api/kits/${s}`,t),deleteKit:async s=>F.delete(`/api/kits/${s}`),unassignKit:async s=>F.patch(`/api/kits/unassign/${s}`,{})},xs=s=>le({queryKey:E.kits.list(s),queryFn:()=>O.getKits(s)}),hs=s=>le({queryKey:E.kits.detail(s),queryFn:()=>O.getKit(s),enabled:!!s}),us=()=>{const s=Q();return Y({mutationFn:O.createKit,onSuccess:()=>{s.invalidateQueries({queryKey:E.kits.all}),N.success("Kit created successfully")},onError:t=>{N.error(t.message||"Failed to create kit")}})},ps=()=>{const s=Q();return Y({mutationFn:O.updateKit,onSuccess:(t,a)=>{s.invalidateQueries({queryKey:E.kits.all}),s.invalidateQueries({queryKey:E.kits.detail(a._id)}),N.success("Kit updated successfully")},onError:t=>{N.error(t.message||"Failed to update kit")}})},gs=()=>{const s=Q();return Y({mutationFn:O.deleteKit,onSuccess:()=>{s.invalidateQueries({queryKey:E.kits.all}),N.success("Kit deleted successfully")},onError:t=>{N.error(t.message||"Failed to delete kit")}})},Ne=f.createContext(void 0);function js({children:s}){const[t,a]=f.useState(null),[i,n]=f.useState(!1),[m,b]=f.useState(!1),[D,K]=f.useState(!1),[k,T]=f.useState(!1);return e.jsx(Ne.Provider,{value:{selectedKit:t,setSelectedKit:a,isCreateDialogOpen:i,setIsCreateDialogOpen:n,isEditDialogOpen:m,setIsEditDialogOpen:b,isViewDialogOpen:D,setIsViewDialogOpen:K,isDeleteDialogOpen:k,setIsDeleteDialogOpen:T},children:s})}function P(){const s=f.useContext(Ne);if(!s)throw new Error("useKitsContext must be used within KitsProvider");return s}var A=(s=>(s.CHECKING_STOCK="checking stock",s.AWAITING_STOCK="awaiting stock",s.ASSEMBLING_KIT="assembling kit",s.READY_TO_SHIP="ready to ship",s.SHIPPED="shipped",s.AWAITING_CONFIRMATION="awaiting confirmation",s.CONFIRMED="confirmed",s.CANCELLED="cancelled",s.RETURNED="returned",s))(A||{});const fs=ge({name:y().optional(),street:y().optional(),city:y().optional(),state:y().optional(),zipCode:y().optional(),country:y().optional()}),ve=ge({name:y().min(1,"Kit name is required"),description:y().optional(),notes:y().optional(),tags:ae(y()).optional(),state:Me(A).optional(),shippingAddress:fs.optional(),company:y().optional().nullable(),user:y().optional().nullable(),property:y().optional().nullable(),hardware:ae(y()).optional()}),Ce=s=>({"checking stock":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300","awaiting stock":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300","assembling kit":"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300","ready to ship":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300",shipped:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300","awaiting confirmation":"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",confirmed:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",cancelled:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300",returned:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300"})[s]||"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",ys=s=>{if(!s)return"-";const t=[s.name,s.street,s.city,s.state,s.zipCode,s.country].filter(Boolean);return t.length>0?t.join(", "):"-"};function Ns(){const{isCreateDialogOpen:s,setIsCreateDialogOpen:t}=P(),a=us(),[i,n]=f.useState([]),[m,b]=f.useState([]),[D,K]=f.useState(!1),[k,T]=f.useState(""),j=ie({resolver:oe(ve),defaultValues:{name:"",description:"",notes:"",tags:[],state:A.CHECKING_STOCK,shippingAddress:{name:"",street:"",city:"",state:"",zipCode:"",country:""},company:null,user:null,property:null,hardware:[]}});f.useEffect(()=>{s&&I()},[s]);const I=async()=>{K(!0);try{const[c,l]=await Promise.all([pe.list(),xe.getProperties()]);n(c),b(l)}catch{N.error("Failed to load form data")}finally{K(!1)}},z=async c=>{try{await a.mutateAsync(c),N.success("Kit created successfully"),j.reset(),t(!1)}catch{N.error("Failed to create kit")}},d=c=>{if(c.key==="Enter"&&k.trim()){c.preventDefault();const l=j.getValues("tags")??[];l.includes(k.trim())||j.setValue("tags",[...l,k.trim()]),T("")}},U=c=>{const l=j.getValues("tags")??[];j.setValue("tags",l.filter(B=>B!==c))};return e.jsx(W,{open:s,onOpenChange:t,children:e.jsxs(J,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[725px]",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Create Kit"}),e.jsx(ee,{children:"Add a new kit to your system. Fill in the kit details below."})]}),D?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx($,{className:"h-8 w-8 animate-spin"})}):e.jsx(ce,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(z),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:j.control,name:"name",render:({field:c})=>e.jsxs(h,{children:[e.jsx(u,{children:"Name *"}),e.jsx(g,{children:e.jsx(v,{placeholder:"Enter kit name",...c})}),e.jsx(p,{})]})}),e.jsx(x,{control:j.control,name:"company",render:({field:c})=>e.jsxs(h,{children:[e.jsx(u,{children:"Company"}),e.jsx(ue,{value:c.value,onValueChange:c.onChange,placeholder:"Select company"}),e.jsx(p,{})]})}),e.jsx(x,{control:j.control,name:"hardware",render:({field:c})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Hardware"}),e.jsx(g,{children:e.jsx(he,{options:i.map(l=>({label:`${l.name} (${l.category})`,value:l._id})),onValueChange:c.onChange,value:c.value??[],placeholder:"Select hardware"})}),e.jsx(p,{})]})}),e.jsx(x,{control:j.control,name:"state",render:({field:c})=>e.jsxs(h,{children:[e.jsx(u,{children:"State *"}),e.jsxs(M,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(g,{children:e.jsx(H,{children:e.jsx(q,{placeholder:"Select state"})})}),e.jsx(L,{children:Object.values(A).map(l=>e.jsx(V,{value:l,children:l},l))})]}),e.jsx(p,{})]})}),e.jsx(x,{control:j.control,name:"property",render:({field:c})=>e.jsxs(h,{children:[e.jsx(u,{children:"Property"}),e.jsxs(M,{onValueChange:l=>c.onChange(l==="none"?null:l),value:c.value||"none",children:[e.jsx(g,{children:e.jsx(H,{children:e.jsx(q,{placeholder:"Select property"})})}),e.jsxs(L,{children:[e.jsx(V,{value:"none",children:"None"}),m.map(l=>e.jsxs(V,{value:l._id,children:[l.shortAddress,l.unit&&` Unit ${l.unit}`,l.city&&l.state&&` - ${l.city}, ${l.state}`]},l._id))]})]}),e.jsx(p,{})]})}),e.jsx(x,{control:j.control,name:"description",render:({field:c})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Description"}),e.jsx(g,{children:e.jsx(R,{placeholder:"Enter kit description",className:"resize-none",...c})}),e.jsx(p,{})]})}),e.jsx(x,{control:j.control,name:"notes",render:({field:c})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Notes"}),e.jsx(g,{children:e.jsx(R,{placeholder:"Enter notes",className:"resize-none",...c})}),e.jsx(p,{})]})}),e.jsx(x,{control:j.control,name:"tags",render:({field:c})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Tags"}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{placeholder:"Type a tag and press Enter",value:k,onChange:l=>T(l.target.value),onKeyDown:d}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(c.value??[]).map(l=>e.jsxs(C,{variant:"secondary",children:[l,e.jsx(w,{type:"button",variant:"ghost",size:"sm",className:"ml-1 h-auto p-0",onClick:()=>U(l),children:e.jsx(de,{className:"h-3 w-3"})})]},l))})]})}),e.jsx(p,{})]})})]}),e.jsxs(me,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsxs(w,{type:"submit",disabled:a.isPending,children:[a.isPending&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Kit"]})]})]})})]})})}function vs(){const{isEditDialogOpen:s,setIsEditDialogOpen:t,selectedKit:a}=P(),i=ps(),{data:n,isLoading:m}=hs(a?._id||""),[b,D]=f.useState([]),[K,k]=f.useState([]),[T,j]=f.useState(!1),[I,z]=f.useState(""),d=ie({resolver:oe(ve),defaultValues:{name:"",description:"",notes:"",tags:[],state:A.CHECKING_STOCK,shippingAddress:{name:"",street:"",city:"",state:"",zipCode:"",country:""},company:null,user:null,property:null,hardware:[]}});f.useEffect(()=>{s&&n&&(U(),d.reset({name:n.name||"",description:n.description||"",notes:n.notes||"",tags:n.tags||[],state:n.state,shippingAddress:{name:n.shippingAddress?.name||"",street:n.shippingAddress?.street||"",city:n.shippingAddress?.city||"",state:n.shippingAddress?.state||"",zipCode:n.shippingAddress?.zipCode||"",country:n.shippingAddress?.country||""},company:n.company?._id||null,user:n.user?._id||null,property:n.property?._id||null,hardware:n.hardware?.map(r=>r._id)||[]}))},[s,n,d]);const U=async()=>{j(!0);try{const[r,o]=await Promise.all([pe.list(),xe.getProperties()]);D(r),k(o)}catch{N.error("Failed to load form data")}finally{j(!1)}},c=async r=>{if(a)try{await i.mutateAsync({_id:a._id,...r}),N.success("Kit updated successfully"),t(!1)}catch{N.error("Failed to update kit")}},l=r=>{if(r.key==="Enter"&&I.trim()){r.preventDefault();const o=d.getValues("tags")??[];o.includes(I.trim())||d.setValue("tags",[...o,I.trim()]),z("")}},B=r=>{const o=d.getValues("tags")??[];d.setValue("tags",o.filter(we=>we!==r))};return e.jsx(W,{open:s,onOpenChange:t,children:e.jsxs(J,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[725px]",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Edit Kit"}),e.jsx(ee,{children:"Update the kit details below."})]}),T||m?e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx($,{className:"h-8 w-8 animate-spin"})}):e.jsx(ce,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(c),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:d.control,name:"name",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"Name *"}),e.jsx(g,{children:e.jsx(v,{placeholder:"Enter kit name",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"state",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"State *"}),e.jsxs(M,{onValueChange:r.onChange,value:r.value,children:[e.jsx(g,{children:e.jsx(H,{children:e.jsx(q,{placeholder:"Select state"})})}),e.jsx(L,{children:Object.values(A).map(o=>e.jsx(V,{value:o,children:o},o))})]}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"description",render:({field:r})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Description"}),e.jsx(g,{children:e.jsx(R,{placeholder:"Enter kit description",className:"resize-none",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"notes",render:({field:r})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Notes"}),e.jsx(g,{children:e.jsx(R,{placeholder:"Enter notes",className:"resize-none",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"tags",render:({field:r})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Tags"}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{placeholder:"Type a tag and press Enter",value:I,onChange:o=>z(o.target.value),onKeyDown:l}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(r.value??[]).map(o=>e.jsxs(C,{variant:"secondary",children:[o,e.jsx(w,{type:"button",variant:"ghost",size:"sm",className:"ml-1 h-auto p-0",onClick:()=>B(o),children:e.jsx(de,{className:"h-3 w-3"})})]},o))})]})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"company",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"Company"}),e.jsx(ue,{value:r.value,onValueChange:r.onChange,placeholder:"Select company"}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"property",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"Property"}),e.jsxs(M,{onValueChange:o=>r.onChange(o==="none"?null:o),value:r.value||"none",children:[e.jsx(g,{children:e.jsx(H,{children:e.jsx(q,{placeholder:"Select property"})})}),e.jsxs(L,{children:[e.jsx(V,{value:"none",children:"None"}),K.map(o=>e.jsxs(V,{value:o._id,children:[o.shortAddress,o.unit&&` Unit ${o.unit}`,o.city&&o.state&&` - ${o.city}, ${o.state}`]},o._id))]})]}),e.jsx(p,{})]})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("h3",{className:"mb-2 text-sm font-medium",children:"Shipping Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:d.control,name:"shippingAddress.name",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"Name"}),e.jsx(g,{children:e.jsx(v,{placeholder:"John Doe",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"shippingAddress.street",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"Street"}),e.jsx(g,{children:e.jsx(v,{placeholder:"123 Main St",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"shippingAddress.city",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"City"}),e.jsx(g,{children:e.jsx(v,{placeholder:"New York",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"shippingAddress.state",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"State"}),e.jsx(g,{children:e.jsx(v,{placeholder:"NY",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"shippingAddress.zipCode",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"Zip Code"}),e.jsx(g,{children:e.jsx(v,{placeholder:"10001",...r})}),e.jsx(p,{})]})}),e.jsx(x,{control:d.control,name:"shippingAddress.country",render:({field:r})=>e.jsxs(h,{children:[e.jsx(u,{children:"Country"}),e.jsx(g,{children:e.jsx(v,{placeholder:"USA",...r})}),e.jsx(p,{})]})})]})]}),e.jsx(x,{control:d.control,name:"hardware",render:({field:r})=>e.jsxs(h,{className:"col-span-2",children:[e.jsx(u,{children:"Hardware"}),e.jsx(g,{children:e.jsx(he,{options:b.map(o=>({label:`${o.name} (${o.category})`,value:o._id})),onValueChange:r.onChange,value:r.value??[],placeholder:"Select hardware"})}),e.jsx(p,{})]})})]}),e.jsxs(me,{children:[e.jsx(w,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsxs(w,{type:"submit",disabled:i.isPending,children:[i.isPending&&e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Kit"]})]})]})})]})})}function Cs(){const{isDeleteDialogOpen:s,setIsDeleteDialogOpen:t,selectedKit:a}=P(),i=gs(),n=async()=>{if(a)try{await i.mutateAsync(a._id),t(!1)}catch{N.error("Failed to delete kit")}};return e.jsx(He,{open:s,onOpenChange:t,children:e.jsxs(qe,{children:[e.jsxs(Le,{children:[e.jsx(Re,{children:"Are you absolutely sure?"}),e.jsxs(Ue,{children:["This action cannot be undone. This will permanently delete the kit",a?.name&&` "${a.name}"`," and remove it from our servers."]})]}),e.jsxs(Be,{children:[e.jsx(Ge,{children:"Cancel"}),e.jsx(Qe,{onClick:n,disabled:i.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:i.isPending?"Deleting...":"Delete"})]})]})})}function ws(){const{setIsCreateDialogOpen:s}=P();return e.jsxs(w,{onClick:()=>s(!0),children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"Add Kit"]})}function bs({column:s,title:t,options:a}){const i=s?.getFacetedUniqueValues(),n=new Set(s?.getFilterValue());return e.jsxs(ts,{children:[e.jsx(as,{asChild:!0,children:e.jsxs(w,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),t,n?.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(ns,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(C,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:n.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:n.size>2?e.jsxs(C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[n.size," selected"]}):a.filter(m=>n.has(m.value)).map(m=>e.jsx(C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:m.label},m.value))})]})]})}),e.jsx(rs,{className:"w-[200px] p-0",align:"start",children:e.jsxs(Ve,{children:[e.jsx(Ee,{placeholder:t}),e.jsxs(Pe,{children:[e.jsx(Oe,{children:"No results found."}),e.jsx(se,{children:a.map(m=>{const b=n.has(m.value);return e.jsxs(te,{onSelect:()=>{b?n.delete(m.value):n.add(m.value);const D=Array.from(n);s?.setFilterValue(D.length?D:void 0)},children:[e.jsx("div",{className:_("border-primary mr-2 flex h-4 w-4 items-center justify-center rounded-sm border",b?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Xe,{className:_("h-4 w-4")})}),m.icon&&e.jsx(m.icon,{className:"text-muted-foreground mr-2 h-4 w-4"}),e.jsx("span",{children:m.label}),i?.get(m.value)&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:i.get(m.value)})]},m.value)})}),n.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{}),e.jsx(se,{children:e.jsx(te,{onSelect:()=>s?.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function Ds({table:s}){return e.jsxs(je,{children:[e.jsx(ls,{asChild:!0,children:e.jsxs(w,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(fe,{align:"end",className:"w-[150px]",children:[e.jsx(is,{children:"Toggle columns"}),e.jsx(ye,{}),s.getAllColumns().filter(t=>typeof t.accessorFn<"u"&&t.getCanHide()).map(t=>e.jsx(os,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:a=>t.toggleVisibility(!!a),children:t.id},t.id))]})]})}function ks({table:s}){const t=s.getState().columnFilters.length>0,a=Object.values(A).map(i=>({value:i,label:i}));return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-center space-x-2",children:[e.jsx(v,{placeholder:"Search kits...",value:s.getColumn("name")?.getFilterValue()??"",onChange:i=>s.getColumn("name")?.setFilterValue(i.target.value),className:"h-8 w-[150px] lg:w-[250px]"}),s.getColumn("state")&&e.jsx(bs,{column:s.getColumn("state"),title:"State",options:a}),t&&e.jsxs(w,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(es,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(Ds,{table:s})]})}function Ss({row:s}){const t=s.original,{setSelectedKit:a,setIsEditDialogOpen:i,setIsViewDialogOpen:n,setIsDeleteDialogOpen:m}=P();return e.jsxs(je,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(w,{variant:"ghost",className:"data-[state=open]:bg-muted flex h-8 w-8 p-0",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(fe,{align:"end",className:"w-[160px]",children:[e.jsx(G,{onClick:()=>{a(t),n(!0)},children:"View"}),e.jsx(G,{onClick:()=>{a(t),i(!0)},children:"Edit"}),e.jsx(ye,{}),e.jsxs(G,{onClick:()=>{a(t),m(!0)},className:"text-red-600",children:["Delete",e.jsx(ds,{children:"⌘⌫"})]})]})]})}const ne=[{id:"select",header:({table:s})=>e.jsx(re,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>s.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),meta:{className:_("sticky md:table-cell left-0 z-10 rounded-tl","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted")},cell:({row:s})=>e.jsx(re,{checked:s.getIsSelected(),onCheckedChange:t=>s.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:s})=>e.jsx(S,{column:s,title:"Name"}),cell:({row:s})=>{const t=s.getValue("name");return e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(ms,{className:"max-w-48 font-medium",children:t})})},meta:{className:_("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell")},enableHiding:!1},{accessorKey:"state",header:({column:s})=>e.jsx(S,{column:s,title:"State"}),cell:({row:s})=>{const t=s.getValue("state");return e.jsx(C,{className:_("font-medium",Ce(t)),children:t})},filterFn:(s,t,a)=>a.includes(s.getValue(t))},{id:"company",header:({column:s})=>e.jsx(S,{column:s,title:"Company"}),cell:({row:s})=>{const t=s.original.company||s.original.user?.company;return e.jsx("div",{className:"text-nowrap",children:t?.name||e.jsx("span",{className:"text-muted-foreground",children:"-"})})},enableSorting:!1},{id:"user",header:({column:s})=>e.jsx(S,{column:s,title:"User"}),cell:({row:s})=>{const t=s.original.user;return t?e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm",children:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.email}),e.jsx("div",{className:"text-muted-foreground text-xs",children:t.email})]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})},enableSorting:!1},{id:"property",header:({column:s})=>e.jsx(S,{column:s,title:"Property"}),cell:({row:s})=>{const t=s.original.property;return t?e.jsxs("div",{className:"text-nowrap",children:[e.jsxs("div",{className:"text-sm",children:[t.shortAddress,t.unit&&` Unit ${t.unit}`]}),t.city&&t.state&&e.jsxs("div",{className:"text-muted-foreground text-xs",children:[t.city,", ",t.state]})]}):e.jsx("span",{className:"text-muted-foreground",children:"-"})},enableSorting:!1},{id:"hardware",header:({column:s})=>e.jsx(S,{column:s,title:"Hardware"}),cell:({row:s})=>{const t=s.original.hardware?.length||0;return e.jsx("div",{className:"text-center",children:e.jsx(C,{variant:"secondary",children:t})})},enableSorting:!1},{id:"tags",header:({column:s})=>e.jsx(S,{column:s,title:"Tags"}),cell:({row:s})=>{const t=s.original.tags||[];return t.length===0?e.jsx("span",{className:"text-muted-foreground",children:"-"}):e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.slice(0,3).map((a,i)=>e.jsx(C,{variant:"outline",className:"text-xs",children:a},i)),t.length>3&&e.jsxs(C,{variant:"outline",className:"text-xs",children:["+",t.length-3]})]})},enableSorting:!1},{id:"actions",cell:({row:s})=>e.jsx(Ss,{row:s}),meta:{className:_("sticky md:table-cell right-0 z-10","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted")}}];function As({data:s,isLoading:t}){const{table:a}=Ye({data:s,columns:ne});return e.jsx(We,{table:a,columns:ne,isLoading:t,toolbar:e.jsx(ks,{table:a}),showToolbar:!0})}function Ks(){const{isViewDialogOpen:s,setIsViewDialogOpen:t,selectedKit:a}=P();return a?e.jsx(W,{open:s,onOpenChange:t,children:e.jsxs(J,{className:"sm:max-w-[625px]",children:[e.jsxs(X,{children:[e.jsx(Z,{children:"Kit Details"}),e.jsx(ee,{children:"View detailed information about the kit."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm",children:a.name})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"State"}),e.jsx(C,{className:Ce(a.state),children:a.state})]})]}),a.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-sm",children:a.description})]}),a.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm",children:a.notes})]}),a.tags&&a.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((i,n)=>e.jsx(C,{variant:"secondary",children:i},n))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Company"}),e.jsx("p",{className:"text-sm",children:a.company?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"User"}),a.user?e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{children:a.user.firstName&&a.user.lastName?`${a.user.firstName} ${a.user.lastName}`:a.user.email}),e.jsx("p",{className:"text-muted-foreground",children:a.user.email})]}):e.jsx("p",{className:"text-sm",children:"-"})]})]}),a.billingEntity&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Billed To"}),e.jsx("p",{className:"text-sm",children:a.billingEntity.entityName})]}),a.property&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Property"}),e.jsxs("p",{className:"text-sm",children:[a.property.shortAddress,a.property.unit&&` Unit ${a.property.unit}`,a.property.city&&a.property.state&&` - ${a.property.city}, ${a.property.state}`]})]}),a.shippingAddress&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Shipping Address"}),e.jsx("p",{className:"text-sm",children:ys(a.shippingAddress)})]}),a.hardware&&a.hardware.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-muted-foreground mb-2 text-sm font-medium",children:["Hardware (",a.hardware.length,")"]}),e.jsx("div",{className:"space-y-1",children:a.hardware.map(i=>e.jsxs("div",{className:"text-sm",children:[i.name," ",i.category&&e.jsxs("span",{className:"text-muted-foreground",children:["(",i.category,")"]})]},i._id))})]}),a.assignedDate&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Assigned Date"}),e.jsx("p",{className:"text-sm",children:new Date(a.assignedDate).toLocaleDateString()})]}),a.device_id&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-muted-foreground text-sm font-medium",children:"Device ID"}),e.jsx("p",{className:"font-mono text-sm",children:a.device_id})]})]})]})}):null}function Ts(){const s=be({strict:!1}),{data:t=[],isLoading:a,error:i}=xs(s.company?{company:s.company}:void 0);return e.jsxs(js,{children:[e.jsxs(Ae,{fixed:!0,children:[e.jsx(Ke,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(Te,{}),e.jsx(Ie,{}),e.jsx(Fe,{})]})]}),e.jsxs(_e,{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Kits"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and organize your hardware kits."})]}),e.jsx(ws,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:i?e.jsxs(De,{variant:"destructive",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsxs(Se,{children:["Failed to load kits."," ",i instanceof Error?i.message:"Please try again later."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(As,{data:t,isLoading:a}),e.jsx(Ns,{}),e.jsx(vs,{}),e.jsx(Ks,{}),e.jsx(Cs,{})]})})]})]})}const xt=Ts;export{xt as component};
